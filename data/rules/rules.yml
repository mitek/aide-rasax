version: "2.0"
rules:
- rule: handoff intent from other bot's handoff triggers greeting
  steps:
  - intent: handoff
  - action: utter_chitchat

- rule: start open incident form
  steps:
  - intent: helpcreate
  - action: open_incident_form
  - active_loop: open_incident_form

- rule: submit open incident form
  condition:
    - active_loop: open_incident_form
  steps:
  - action: open_incident_form
  - active_loop: null
  - action: action_open_incident

- rule: start incident status form
  steps:
  - intent: helpcheck
  - action: incident_status_form
  - active_loop: incident_status_form

- rule: submit incident status form
  condition:
    - active_loop: incident_status_form
  steps:
  - action: incident_status_form
  - active_loop: null
  - action: action_check_incident_status

- rule: ask for more details
  steps:
  - intent: need_help_broad
  - action: utter_ask_more_details

- rule: sales -> need_help_broad -> deactivate loop
  condition:
  - active_loop: sales_form
  steps:
  - intent: need_help_broad
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_ask_more_details

- rule: anything else? - yes
  steps:
  - action: utter_anything_else
  - intent: affirm
  - action: utter_what_help

# Rules for handling intent: explain
- rule: explain after utter_first_bot_with_rasa # extracted from a training story
  steps:
  - action: utter_first_bot_with_rasa
  - intent: explain
  - action: action_set_onboarding
  - slot_was_set:
    - onboarding: true
  - action: utter_built_bot_before
- rule: explain NLU # from conversation 13dc0ea0b361417a9558d1db4f49141d
  steps:
  - intent: explain
    entities:
    - product: nlu
  - action: utter_explain_nlu
  wait_for_user_input: false
- rule: explain Core
  steps:
  - intent: explain
    entities:
    - product: core
  - action: utter_explain_core
  wait_for_user_input: false
- rule: explain X
  steps:
  - intent: explain
    entities:
    - product: x
  - action: utter_explain_x
  wait_for_user_input: false
